language: cpp

compiler: clang

sudo: required

addons:
    apt:
        sources:
          - ubuntu-toolchain-r-test
          - llvm-toolchain-precise-3.6
        packages:
          - g++-4.8
          - clang-3.6

before_install:
  - if [ "$CXX" == "clang++" ]; then export CXX="clang++-3.6"; fi
  - wget https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py
  - python ez_setup.py –user
  - curl -O https://raw.github.com/pypa/pip/master/contrib/get-pip.py
  - python get-pip.py –user
  - ~/.local/bin/pip install coveralls

install:
  - ./configure --enable-gcov && make && make check
  - mkdir build
  - cd build
  - cmake -G "Unix Makefiles" ..
  - make

script: test/libparser_tests
after_success: coveralls --exclude lib --exclude tests --gcov-options '\-lp \-c'